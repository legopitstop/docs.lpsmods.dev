{
  "$id": "https://github.com/Stevertus/mcscript",
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "mcscript",
  "scopeName": "source.mcscript",
  "fileTypes": ["mcscript"],
  "patterns": [
    { "include": "#file" },
    { "include": "#comment" },
    { "include": "#multi-comment" },
    { "include": "#command-full" },
    { "include": "#keyword-top-only" },
    { "include": "#js-modal" },
    { "include": "#modal" },
    { "include": "#expression" }
  ],
  "repository": {
    "expression": {
      "patterns": [
        { "include": "#keyword" },
        { "include": "#keyword2" },
        { "include": "#property" },
        { "include": "#operator" },
        { "include": "#number" },
        { "include": "#entity" },
        {
          "begin": "\\'",
          "end": "\\'",
          "name": "string.quoted.single",
          "patterns": [{ "name": "constant.character.escape.untitled", "match": "\\." }]
        },
        {
          "begin": "\"",
          "end": "\"",
          "name": "string.quoted.double",
          "patterns": [{ "name": "constant.character.escape.untitled", "match": "\\." }]
        }
      ]
    },
    "modal": {
      "match": "(modal)(\\s+)([\\w\\d$/\\._-]*)",
      "name": "keyword.control"
    },
    "file": {
      "match": "(\\s*#file:|\\s*#extend:)(\\s+)([\\w\\d$/\\._-]*)",
      "name": "markup.italic"
    },
    "js-modal": {
      "begin": "modaljs",
      "end": "}",
      "name": "mcscript.javascript"
    },
    "variable": {
      "match": "(\\$[\\w\\-]*)|([a-zA-Z0-9]+)(?=\\s*\\(.*)",
      "name": "variable.parameter"
    },
    "keyword": {
      "match": "\\b(if|as|at|positioned|align|in|rotated|anchored|tag|result|score|const)\\b",
      "name": "keyword.control"
    },
    "keyword-top-only": {
      "match": "\\b(Map|Array|log|then|else|true|false|asat|dimension|while|do|forEach|for|raycast|stop|continue|switch|case|default|var|bool|boolean)\\b",
      "name": "keyword.control"
    },
    "keyword2": {
      "match": "\\b(grant|revoke|start|stop|reset|set|add|remove|merge|entity|block|nbt|gamemode|level|x|y|z|dx|dy|dz|distance|x_rotation|y_rotation|limit|tag|team|type|sort|scores|\\.repl)\\b",
      "name": "string.quoted.single"
    },
    "property": {
      "match": "\\b(area_effect_cloud|armor_stand|arrow|bat|blaze|boat|cave_spider|chest_minecart|chicken|cod_mob|commandblock_minecart|cow|creeper|dolphin|donkey|dragon_fireball|drowned|drowned|egg|elder_guardian|ender_crystal|ender_dragon|ender_pearl|enderman|endermite|evocation_fangs|evocation_illager|eye_of_ender_signal|falling_block|fireball|fireworks_rocket|furnace_minecart|ghast|giant|guardian|hopper_minecart|horse|husk|illusion_illager|item|item_frame|leash_knot|lightning_bolt|llama|llama_spit|magma_cube|minecart|override|mooshroom|mule|ocelot|painting|parrot|phantom|pig|polar_bear|potion|puffer_fish|rabbit|salmon_mob|sheep|shulker|shulker_bullet|silverfish|skeleton|skeleton_horse|slime|small_fireball|snowball|snowman|spawner_minecart|spectral_arrow|spider|squid|stray|tnt|tnt_minecart|trident|tropical_fish|turtle|vex|villager|villager_golem|vindication_illager|witch|wither|wither_skeleton|wither_skull|wolf|xp_bottle|xp_orb|zombie|zombie_horse|zombie_pigman|zombie_villager)\\b",
      "name": "keyword.control"
    },
    "operator": {
      "match": "\\=|\\+\\=|\\-\\=|\\*\\=|/\\=|\\%\\=|\\+\\+|\\-\\-|\\*|/|\\+|\\-|\\%|\\>|\\<|\\>\\=|\\<\\=",
      "name": "keyword.operator"
    },
    "number": { "match": "\b[0-9\\.\\-]+\b", "name": "support.constant" },
    "comment": { "match": "(#|\\/\\/).*", "name": "comment.line.number-sign" },
    "multi-comment": {
      "begin": "\\/\\*",
      "end": "\\*\\/",
      "name": "comment.block"
    },
    "entity": { "match": "(@(s|e|a|r))|~", "name": "variable.language" },
    "command": {
      "match": "\\b(bossbar|advancement|ban|banlist|data|clear|clone|debug|defaultgamemode|deop|difficulty|effect|execute|experience|fill|function|gamemode|gamerule|give|help|kick|kill|list|locate|msg|pardon|pardon-ip|particle|playsound|publish|recipe|reload|replaceitem|save-all|save-off|save-on|say|scoreboard|seed|setblock|setidletimeout|setworldspawn|spawnpoint|spreadplayers|stop|stopsound|summon|tag|team|teleport|tell|tellraw|time|title|trigger|weather|whitelist|worldborder|xp)\\b",
      "name": "keyword.other"
    },
    "command-full": {
      "begin": "\\/|run:",
      "beginCaptures": { "0": { "name": "storage.type" } },
      "end": "\\n",
      "name": "command.block",
      "patterns": [{ "include": "#command" }, { "include": "#expression" }]
    }
  }
}
